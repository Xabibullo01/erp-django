{% extends "base.html" %}
{% load widget_tweaks %}
{% block title %}
  {% if object.pk %}Foydalanuvchini tahrirlash{% else %}Yangi foydalanuvchi{% endif %}
{% endblock %}

{% block content %}
<section class="flex justify-center items-center">
  <div class="w-full max-w-xl bg-white/70 dark:bg-slate-900/70 backdrop-blur-md
              p-8 rounded-2xl ring-1 ring-white/30 shadow-md">
    <h2 class="text-center text-lg font-semibold mb-6">
      {% if object.pk %}Foydalanuvchini&nbsp;tahrirlash{% else %}Yangi&nbsp;foydalanuvchi{% endif %}
    </h2>

    <form method="post" enctype="multipart/form-data" class="space-y-6">
      {% csrf_token %}

      <!-- Username -->
      <div>
        <label class="block mb-1 font-medium">Username</label>
        {{ form.username|add_class:"w-full rounded-lg bg-slate-50 dark:bg-slate-800 border border-slate-300 dark:border-slate-700 px-3 py-2 focus:ring-brand focus:border-brand" }}
      </div>

      <!-- Email -->
      <div>
        <label class="block mb-1 font-medium">Email</label>
        {{ form.email|add_class:"w-full rounded-lg bg-slate-50 dark:bg-slate-800 border border-slate-300 dark:border-slate-700 px-3 py-2 focus:ring-brand focus:border-brand" }}
      </div>

      <div class="grid gap-6 md:grid-cols-2">
        <!-- Role -->
        <div>
          <label class="block mb-1 font-medium">Rol</label>
          {{ form.role|add_class:"w-full rounded-lg bg-slate-50 dark:bg-slate-800 border border-slate-300 dark:border-slate-700 px-3 py-2 focus:ring-brand focus:border-brand" }}
        </div>

        <!-- Phone -->
        <div>
          <label class="block mb-1 font-medium">Telefon</label>
          {{ form.phone|add_class:"w-full rounded-lg bg-slate-50 dark:bg-slate-800 border border-slate-300 dark:border-slate-700 px-3 py-2 focus:ring-brand focus:border-brand" }}
        </div>
      </div>

      <!-- Password -->
      <div>
        <label class="block mb-1 font-medium">Parol</label>
        {{ form.password|add_class:"w-full rounded-lg bg-slate-50 dark:bg-slate-800 border border-slate-300 dark:border-slate-700 px-3 py-2 focus:ring-brand focus:border-brand" }}
      </div>

      <!-- Avatar preview -->
      {% if object.pk and object.avatar %}
        <div class="flex justify-center">
          <img src="{{ object.avatar.url }}" class="rounded-full ring-2 ring-brand"
               alt="avatar" width="96" height="96" style="object-fit:cover;">
        </div>
      {% endif %}

      <!-- Avatar upload -->
      <div>
        <label class="block mb-1 font-medium">Avatar</label>
        {{ form.avatar|add_class:"w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-brand file:text-white hover:file:bg-brand/90" }}
      </div>

      <!-- Buttons -->
      <div class="flex justify-between gap-4">
        <button class="px-6 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-700
                       text-white font-semibold shadow">
          Saqlash
        </button>
        <a href="{% url 'user_list' %}"
           class="px-6 py-2 rounded-lg border border-slate-300 dark:border-slate-600
                  hover:bg-slate-100 dark:hover:bg-slate-800 font-semibold">
          Orqaga
        </a>
      </div>
    </form>
  </div>
</section>
{% endblock  %}